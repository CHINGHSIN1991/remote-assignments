<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta charset="utf-8/">
  <title>JavaScript:AJAX 網路連線實務</title>
</head>

<body>
  <h3>get Sum</h3>
  <input type="number" name="number" id="number" value="">
  <button type="submit" id="send">Get Sum</button>
  <h3 id="result"></h3>

  <script>
    const send = document.getElementById('send');
    const number = document.getElementById('number');
    const result = document.getElementById('result');

    send.addEventListener('click', function (e) {
      e.preventDefault();
      const num = number.value;
      console.log(num);
      fetch(`http://localhost:3000/getData?number=${num}`).then(function (res) {
        return res.json();
      }).then(function (data) {
        //已經取得資料，把資料呈現在畫面上
        const result = document.querySelector('#result');
        const sum = data;
        result.innerHTML = `Sum of 1 to ${num} = ${sum}`
      }).catch((err) => {
        console.log(err);
        // alert(err);
      })
    });

  </script>
</body>

</html>